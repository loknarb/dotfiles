{
  "profiles": [
      {
          "complex_modifications": {
              "parameters": {
                  "basic.to_if_alone_timeout_milliseconds": 300,
                  "basic.to_if_held_down_threshold_milliseconds": 150
              },
              "rules": [
                  {
                      "description": "Open current iTerm or a new window with Shift+Command+X",
                      "manipulators": [
                          {
                          "type": "basic",
                          "from": {
                              "key_code": "z",
                              "modifiers": {
                                  "mandatory": ["left_shift", "left_option"]
                              }
                          },
                          "to": [
                              {
                              "shell_command": "~/dotfiles/open_vscode.sh"
                              }
                          ]
                          }
                      ]
                  },
                  {
                      "description": "Open current iTerm or a new window with Shift+Command+X",
                      "manipulators": [
                          {
                          "type": "basic",
                          "from": {
                              "key_code": "x",
                              "modifiers": {
                                  "mandatory": ["left_shift", "left_option"]
                              }
                          },
                          "to": [
                              {
                              "shell_command": "~/dotfiles/open_iterm.sh"
                              }
                          ]
                          }
                      ]
                  },
                  {
                      "description": "PC-Style Desktop Move Left (this require Rectangle from App Store)",
                      "manipulators": [
                          {
                              "from": {
                                  "key_code": "j",
                                  "modifiers": { "mandatory": ["left_command"] }
                              },
                              "to": [
                                  {
                                      "key_code": "j",
                                      "modifiers": ["left_control"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "PC-Style Desktop Move Right (this require Rectangle from App Store)",
                      "manipulators": [
                          {
                              "from": {
                                  "key_code": "l",
                                  "modifiers": { "mandatory": ["left_command"] }
                              },
                              "to": [
                                  {
                                      "key_code": "l",
                                      "modifiers": ["left_control"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "delete forwards with Left_Option + H",
                      "manipulators": [
                          {
                              "from": {
                                  "key_code": "h",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [{ "key_code": "delete_forward" }],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "Map Left Command esc to Left Command `",
                      "manipulators": [
                          {
                              "from": {
                                  "key_code": "escape",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "grave_accent_and_tilde",
                                      "modifiers": ["left_command"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  
                  {
                      "description": "Maps F5 to ⌘⇧M in MS Teams or ⌘⇧A to ZOOM. F5 has an MIC symbol on recent MacOS keyboards.",
                      "manipulators": [
                          {
                              "from": { "key_code": "f5" },
                              "to": [{ "shell_command": "if [ $(ps aux | grep -v grep | grep -ci \"Microsoft Teams Webview.app/Contents/Frameworks/Microsoft Edge Framework\") -gt 0 ]; then osascript -e 'activate application id \"com.microsoft.teams2\"' -e 'tell application \"System Events\" to keystroke \"m\" using {command down, shift down}'; fi & if [ $(ps aux | grep -v grep | grep -ci \"zoom.us.app/Contents/Frameworks/cpthost.app/Contents/MacOS/CptHost\") -gt 0 ]; then osascript -e 'activate application id \"us.zoom.xos\"' -e 'tell application \"System Events\" to keystroke \"a\" using {command down, shift down}'; fi" }],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "PC-Style Emoji Picker (Command+.)",
                      "manipulators": [
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "^com\\.todesktop\\.230313mzl4w4u92$",
                                          "^com\\.microsoft\\.VSCode$",
                                          "^com\\.microsoft\\.rdc$",
                                          "^com\\.microsoft\\.rdc\\.",
                                          "^net\\.sf\\.cord$",
                                          "^com\\.thinomenon\\.RemoteDesktopConnection$",
                                          "^com\\.itap-mobile\\.qmote$",
                                          "^com\\.nulana\\.remotixmac$",
                                          "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                                          "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                                          "^com\\.teamviewer\\.TeamViewer$",
                                          "^com\\.vmware\\.horizon$",
                                          "^com\\.2X\\.Client\\.Mac$",
                                          "^com\\.OpenText\\.Exceed-TurboX-Client$",
                                          "^com\\.realvnc\\.vncviewer$",
                                          "^com\\.citrix\\.receiver\\.icaviewer",
                                          "^com\\.vmware\\.fusion$",
                                          "^com\\.vmware\\.horizon$",
                                          "^com\\.vmware\\.view$",
                                          "^com\\.parallels\\.desktop$",
                                          "^com\\.parallels\\.vm$",
                                          "^com\\.parallels\\.desktop\\.console$",
                                          "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                                          "^com\\.citrix\\.XenAppViewer$",
                                          "^com\\.vmware\\.proxyApp\\.",
                                          "^com\\.parallels\\.winapp\\.",
                                          "^com\\.utmapp\\.UTM$"
                                      ],
                                      "type": "frontmost_application_unless"
                                  }
                              ],
                              "from": {
                                  "key_code": "period",
                                  "modifiers": { "mandatory": ["command"] }
                              },
                              "to": [
                                  {
                                      "key_code": "spacebar",
                                      "modifiers": ["left_control", "left_command"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "PC-Style Tab Add (Ctrl+T)",
                      "manipulators": [
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "^com\\.microsoft\\.rdc$",
                                          "^com\\.microsoft\\.rdc\\.",
                                          "^net\\.sf\\.cord$",
                                          "^com\\.thinomenon\\.RemoteDesktopConnection$",
                                          "^com\\.itap-mobile\\.qmote$",
                                          "^com\\.nulana\\.remotixmac$",
                                          "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                                          "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                                          "^com\\.teamviewer\\.TeamViewer$",
                                          "^com\\.vmware\\.horizon$",
                                          "^com\\.2X\\.Client\\.Mac$",
                                          "^com\\.OpenText\\.Exceed-TurboX-Client$",
                                          "^com\\.realvnc\\.vncviewer$",
                                          "^com\\.citrix\\.receiver\\.icaviewer",
                                          "^com\\.vmware\\.fusion$",
                                          "^com\\.vmware\\.horizon$",
                                          "^com\\.vmware\\.view$",
                                          "^com\\.parallels\\.desktop$",
                                          "^com\\.parallels\\.vm$",
                                          "^com\\.parallels\\.desktop\\.console$",
                                          "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                                          "^com\\.citrix\\.XenAppViewer$",
                                          "^com\\.vmware\\.proxyApp\\.",
                                          "^com\\.parallels\\.winapp\\.",
                                          "^com\\.utmapp\\.UTM$"
                                      ],
                                      "type": "frontmost_application_unless"
                                  }
                              ],
                              "from": {
                                  "key_code": "t",
                                  "modifiers": { "mandatory": ["left_control"] }
                              },
                              "to": [
                                  {
                                      "key_code": "t",
                                      "modifiers": ["left_command"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "PC-Style Tab Kill (Ctrl+W)",
                      "manipulators": [
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "^com\\.microsoft\\.rdc$",
                                          "^com\\.microsoft\\.rdc\\.",
                                          "^net\\.sf\\.cord$",
                                          "^com\\.thinomenon\\.RemoteDesktopConnection$",
                                          "^com\\.itap-mobile\\.qmote$",
                                          "^com\\.nulana\\.remotixmac$",
                                          "^com\\.p5sys\\.jump\\.mac\\.viewer$",
                                          "^com\\.p5sys\\.jump\\.mac\\.viewer\\.",
                                          "^com\\.teamviewer\\.TeamViewer$",
                                          "^com\\.vmware\\.horizon$",
                                          "^com\\.2X\\.Client\\.Mac$",
                                          "^com\\.OpenText\\.Exceed-TurboX-Client$",
                                          "^com\\.realvnc\\.vncviewer$",
                                          "^com\\.citrix\\.receiver\\.icaviewer",
                                          "^com\\.vmware\\.fusion$",
                                          "^com\\.vmware\\.horizon$",
                                          "^com\\.vmware\\.view$",
                                          "^com\\.parallels\\.desktop$",
                                          "^com\\.parallels\\.vm$",
                                          "^com\\.parallels\\.desktop\\.console$",
                                          "^org\\.virtualbox\\.app\\.VirtualBoxVM$",
                                          "^com\\.citrix\\.XenAppViewer$",
                                          "^com\\.vmware\\.proxyApp\\.",
                                          "^com\\.parallels\\.winapp\\.",
                                          "^com\\.utmapp\\.UTM$"
                                      ],
                                      "type": "frontmost_application_unless"
                                  }
                              ],
                              "from": {
                                  "key_code": "w",
                                  "modifiers": { "mandatory": ["left_control"] }
                              },
                              "to": [
                                  {
                                      "key_code": "w",
                                      "modifiers": ["left_command"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "PC-Style Browser Search Bar Ctrl + L",
                      "manipulators": [
                          {
                              "from": {
                                  "key_code": "l",
                                  "modifiers": { "mandatory": ["left_control"] }
                              },
                              "to": [
                                  {
                                      "key_code": "l",
                                      "modifiers": ["left_command"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "PC-Style Kill Window rather than entire app",
                      "manipulators": [
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "^com\\.microsoft\\.VSCode$"
                                      ],
                                      "type": "frontmost_application_if"
                                  }
                              ],
                              "from": {
                                  "key_code": "q",
                                  "modifiers": { "mandatory": ["left_control"] }
                              },
                              "to": [
                                  {
                                      "key_code": "w",
                                      "modifiers": ["left_command", "left_shift"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "PC-Style Bring new Vscode window up",
                      "manipulators": [
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "^com\\.microsoft\\.VSCode$"
                                      ],
                                      "type": "frontmost_application_if"
                                  }
                              ],
                              "from": {
                                  "key_code": "n",
                                  "modifiers": { "mandatory": ["left_control", "left_shift"] }
                              },
                              "to": [
                                  {
                                      "key_code": "n",
                                      "modifiers": ["left_command", "left_shift"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "Use Javascript+Typescript Syntax Keybindings check l",
                      "manipulators": [
                          {
                              "from": {
                                  "key_code": "a",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "9",
                                      "modifiers": ["left_shift"]
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "d",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "0",
                                      "modifiers": ["left_shift"]
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "s",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "semicolon",
                                      "modifiers": ["left_shift"]
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "f",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "quote",
                                      "modifiers": ["left_shift"]
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "f",
                                  "modifiers": { "mandatory": ["left_shift", "left_option"] }
                              },
                              "to": [{ "key_code": "quote" }],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "a",
                                  "modifiers": { "mandatory": ["left_shift", "left_option"] }
                              },
                              "to": [{ "key_code": "open_bracket" }],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "d",
                                  "modifiers": { "mandatory": ["left_shift", "left_option"] }
                              },
                              "to": [{ "key_code": "close_bracket" }],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "s",
                                  "modifiers": { "mandatory": ["left_shift", "left_option"] }
                              },
                              "to": [{ "key_code": "semicolon" }],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "j",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "open_bracket",
                                      "modifiers": ["left_shift"]
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "k",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "close_bracket",
                                      "modifiers": ["left_shift"]
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "q",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "7",
                                      "modifiers": ["left_shift"]
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "from": {
                                  "key_code": "e",
                                  "modifiers": { "mandatory": ["left_option"] }
                              },
                              "to": [
                                  {
                                      "key_code": "backslash",
                                      "modifiers": ["left_shift"]
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "description": "(Vim 1/11) caps_lock -> on, caps_lock, esc, control+[ or any pointing_button -> off",
                      "manipulators": [
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "com.googlecode.iterm2",
                                          "com.github.atom",
                                          "com.jetbrains.pycharm"
                                      ],
                                      "type": "frontmost_application_unless"
                                  },
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_unless",
                                      "value": 1
                                  }
                              ],
                              "from": { "key_code": "caps_lock" },
                              "parameters": {
                                  "basic.to_if_alone_threshold_milliseconds": 0,
                                  "basic.to_if_held_down_threshold_milliseconds": 150
                              },
                              "to_after_key_up": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  { "key_code": "escape" }
                              ],
                              "to_if_alone": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 1
                                      }
                                  },
                                  { "key_code": "escape" },
                                  {
                                      "halt": true,
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "to_if_held_down": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 1
                                      }
                                  },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "com.googlecode.iterm2",
                                          "com.github.atom",
                                          "com.jetbrains.pycharm"
                                      ],
                                      "type": "frontmost_application_unless"
                                  },
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_if",
                                      "value": 1
                                  }
                              ],
                              "from": { "key_code": "caps_lock" },
                              "to": [
                                  { "key_code": "escape" },
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "com.googlecode.iterm2",
                                          "com.github.atom",
                                          "com.jetbrains.pycharm"
                                      ],
                                      "type": "frontmost_application_unless"
                                  },
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_if",
                                      "value": 1
                                  }
                              ],
                              "from": { "key_code": "a" },
                              "to": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  { "key_code": "a" },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "com.googlecode.iterm2",
                                          "com.github.atom",
                                          "com.jetbrains.pycharm"
                                      ],
                                      "type": "frontmost_application_unless"
                                  },
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_if",
                                      "value": 1
                                  }
                              ],
                              "from": { "key_code": "i" },
                              "to": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  { "key_code": "i" },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "com.googlecode.iterm2",
                                          "com.github.atom",
                                          "com.jetbrains.pycharm"
                                      ],
                                      "type": "frontmost_application_unless"
                                  },
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_if",
                                      "value": 1
                                  }
                              ],
                              "from": { "key_code": "escape" },
                              "to": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "com.googlecode.iterm2",
                                          "com.github.atom",
                                          "com.jetbrains.pycharm"
                                      ],
                                      "type": "frontmost_application_unless"
                                  },
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_if",
                                      "value": 1
                                  }
                              ],
                              "from": {
                                  "key_code": "open_bracket",
                                  "modifiers": { "mandatory": ["control"] }
                              },
                              "to": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "conditions": [
                                  {
                                      "bundle_identifiers": [
                                          "com.googlecode.iterm2",
                                          "com.github.atom",
                                          "com.jetbrains.pycharm"
                                      ],
                                      "type": "frontmost_application_if"
                                  },
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_if",
                                      "value": 1
                                  }
                              ],
                              "from": { "any": "key_code" },
                              "to": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          },
                          {
                              "conditions": [
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_if",
                                      "value": 1
                                  }
                              ],
                              "from": { "any": "pointing_button" },
                              "to": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  },
                  {
                      "available_since": "12.6.9",
                      "description": "(Vim 2/11) finger on trackpad + any key -> off",
                      "manipulators": [
                          {
                              "conditions": [
                                  {
                                      "name": "multitouch_extension_finger_count_total",
                                      "type": "variable_unless",
                                      "value": 0
                                  },
                                  {
                                      "name": "vim_mode",
                                      "type": "variable_if",
                                      "value": 1
                                  }
                              ],
                              "from": { "any": "key_code" },
                              "to": [
                                  {
                                      "set_variable": {
                                          "name": "vim_mode",
                                          "value": 0
                                      }
                                  },
                                  {
                                      "set_notification_message": {
                                          "id": "vim_mode_plus_enabled",
                                          "text": ""
                                      }
                                  }
                              ],
                              "type": "basic"
                          }
                      ]
                  }
              ]
          },
          "devices": [
              {
                  "identifiers": {
                      "is_keyboard": true,
                      "product_id": 835,
                      "vendor_id": 1452
                  },
                  "simple_modifications": [
                      {
                          "from": { "apple_vendor_top_case_key_code": "keyboard_fn" },
                          "to": [{ "key_code": "left_control" }]
                      },
                      {
                          "from": { "key_code": "left_command" },
                          "to": [{ "key_code": "left_option" }]
                      },
                      {
                          "from": { "key_code": "left_option" },
                          "to": [{ "key_code": "left_command" }]
                      }
                  ]
              },
              {
                  "disable_built_in_keyboard_if_exists": true,
                  "identifiers": {
                      "is_keyboard": true,
                      "product_id": 599,
                      "vendor_id": 5426
                  }
              },
              {
                  "identifiers": {
                      "is_keyboard": true,
                      "product_id": 50489,
                      "vendor_id": 1133
                  },
                  "simple_modifications": [
                      {
                          "from": { "key_code": "non_us_backslash" },
                          "to": [{ "key_code": "grave_accent_and_tilde" }]
                      }
                  ]
              }
          ],
          "fn_function_keys": [
              {
                  "from": { "key_code": "f4" },
                  "to": [{ "key_code": "f4" }]
              }
          ],
          "name": "Default profile",
          "selected": true,
          "virtual_hid_keyboard": {
              "country_code": 0,
              "keyboard_type_v2": "iso"
          }
      }
  ]
}